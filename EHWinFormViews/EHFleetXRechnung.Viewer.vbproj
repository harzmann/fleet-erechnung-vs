<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <RootNamespace>EHWinFormViews</RootNamespace>
    <TargetFramework>net4.8</TargetFramework>
	  <UseWindowsForms>true</UseWindowsForms>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="ehfleet_classlibrary" Version="1.3.6">
		<Private>True</Private>
    </PackageReference>
    <PackageReference Include="ILRepack.Lib.MSBuild.Task" Version="2.0.34.2">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="log4net" Version="3.0.1" />
	<PackageReference Include="Stimulsoft.Reports.Net" Version="2024.4.1">
		<Private>True</Private>
	</PackageReference>
    <PackageReference Include="UI.for.WinForms.AllControls.Net48" Version="2024.3.924">
		<Private>True</Private>
    </PackageReference>
  </ItemGroup>

	<Target Name="ILRepacker" AfterTargets="Build" Condition="'$(Configuration)' == 'Release'">
		<ItemGroup>
			<InputAssemblies Include="$(TargetPath)" Condition="'%(filename)' != 'mscorlib' And '%(filename)' != 'System.Drawing' And '%(filename)' != 'Telerik.WinControls.RadSpreadsheet'" />
			<!--<InputAssemblies Include="@(ReferencePathWithRefAssemblies)" Condition="'%(filename)' != 'mscorlib' And '%(filename)' != 'System.Drawing' And '%(filename)' != 'Telerik.WinControls.RadSpreadsheet'" />-->
			<InputAssemblies Include="@(ReferencePathWithRefAssemblies)" Condition="'%(filename)' == 'Stimulsoft.Report' Or '%(filename)' == 'Stimulsoft.Base' Or '%(filename)' == 'Telerik.WinControls' Or '%(filename)' == 'Telerik.WinControls.UI'" />
			<LibraryPath Include="$(TargetPath)" />
			<LibraryPath Include="%(ReferencePathWithRefAssemblies.RelativeDir)" />
		</ItemGroup>

		<ILRepack AllowDuplicateResources="false" KeyFile="..\EHFleet.snk" DebugInfo="false" Internalize="false" InputAssemblies="@(InputAssemblies)" LibraryPath="@(LibraryPath)" OutputFile="$(TargetPath)" Parallel="true" TargetKind="SameAsPrimaryAssembly" Verbose="true" LogFile="repack.log" />
	</Target>

	<ItemGroup>
	  <ProjectReference Include="..\ZUGFeRD\ZUGFeRD.csproj" />
	</ItemGroup>
	<ItemGroup>
		<Reference Include="netstandard" />
		<Reference Include="mscorlib" />
	</ItemGroup>
	<ItemGroup>
	  <None Update="license.key">
	    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
	  </None>
	</ItemGroup>
</Project>
